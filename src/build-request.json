{
  "kind": "build_request",
  "title": "Fix shared URL showing old 'mahek' slug by adding canonical share link and removing legacy references",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Add a single source of truth for the intended public URL (the user-facing share URL) and ensure it is used consistently across the app so the user can share a link that does not include the old 'mahek' slug.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Again it shows 'mahek' in url"
        ]
      },
      "acceptanceCriteria": [
        "A constant (e.g., `PUBLIC_SITE_URL`) exists in `frontend/src/config/publicSiteUrl.ts` and is set to the intended URL (must match the URL used in `frontend/index.html`, currently `https://npt-for-sunidhi.caffeine.xyz`).",
        "No user-facing text or metadata generation logic hardcodes or constructs a URL containing the substring `mahek`."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Add an in-app, user-visible 'Copy link' control that copies the intended public URL (not `window.location` if it includes an old slug) so the user can reliably share the correct link.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Again it shows 'mahek' in url"
        ]
      },
      "acceptanceCriteria": [
        "The main page includes a clearly labeled control (e.g., button) that copies the configured public URL to the clipboard.",
        "After clicking the control, pasting into a chat shows the configured URL and does not contain `mahek`.",
        "If clipboard access fails, the UI shows an English error message and presents the URL in a selectable text field as a fallback."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Implement minimal runtime metadata synchronization to ensure the document title, canonical URL, and Open Graph `og:url` match the configured public URL at runtime (to reduce stale/cached metadata issues).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Again it shows 'mahek' in url"
        ]
      },
      "acceptanceCriteria": [
        "On app load, `document.title` matches the configured branding title.",
        "On app load, the `<link rel=\"canonical\">` `href` equals the configured public URL.",
        "On app load, the `<meta property=\"og:url\">` `content` equals the configured public URL."
      ]
    },
    {
      "id": "REQ-4",
      "text": "Add a guardrail check to prevent reintroducing the wrong name/slug by ensuring the string `mahek` does not appear anywhere in frontend source files (excluding any developer-provided screenshots or unrelated binary assets).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Again it shows 'mahek' in url"
        ]
      },
      "acceptanceCriteria": [
        "A repository-wide, case-insensitive search across `frontend/src` and `frontend/index.html` returns zero matches for `mahek`.",
        "If any matches are found during development, they are removed and replaced with the correct branding/URL configuration."
      ]
    }
  ],
  "constraints": [
    "Do not edit files under `frontend/src/components/ui` (compose them only).",
    "Do not modify immutable hook files listed in SYSTEM_CONTEXT (e.g., `frontend/src/hooks/useInternetIdentity.ts(x)` and `frontend/src/hooks/useActor.ts`).",
    "Backend must remain single-actor (no additional canisters/services)."
  ],
  "nonGoals": [
    "Renaming the deployed Caffeine subdomain/project slug via platform settings (outside the codebase).",
    "Adding new authentication methods beyond Internet Identity.",
    "Adding backend storage or database functionality."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}